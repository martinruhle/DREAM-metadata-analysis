import pandas as pd
import matplotlib.pyplot as plt

# Load the CSV file
file_path = '/workspaces/DREAM-metadata-analysis/metadata.csv'
data = pd.read_csv(file_path)


total_participants_per_category = data.groupby('NIH Racial Category')['participant_id'].nunique()

plt.figure(figsize=(10, 6))
bars = total_participants_per_category.plot(kind='bar', edgecolor='black')
plt.title('Total Participants by NIH Racial Category')
plt.xlabel('NIH Racial Category')
plt.ylabel('Total Participants')
plt.xticks(rotation=45, ha='right')
plt.grid(axis='y')


for bar in bars.patches:
    plt.annotate(
        f'{int(bar.get_height())}', 
        (bar.get_x() + bar.get_width() / 2, bar.get_height()), 
        ha='center', va='bottom'
    )

plt.show()
